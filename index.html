<!DOCTYPE html>
<html>
<head>
  <title>Undertale Music Player</title>
  <style>
    #player-container {
      display: none;
      margin-top: 10px;
    }
    button {
      padding: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<h2>ðŸŽµ Undertale Random Music Player</h2>
<button onclick="togglePlayer()">Toggle Player</button>
<button onclick="getNextSong()">Play Random Song</button>

<div id="player-container">
  <iframe id="player" width="560" height="315" frameborder="0"
    allow="autoplay; encrypted-media" allowfullscreen>
  </iframe>
</div>

<script>
  const songs = [
  "https://www.youtube.com/embed/brP9Q08kEfk?si=jhaQ-teG4J73zr9m"
  ];

  let used = [];
  let currentSongIndex = null; // to track the current song

  function getNextSong() {
    if (used.length === songs.length) {
      alert("All songs have been played!");
      return;
    }

    let index;
    do {
      index = Math.floor(Math.random() * songs.length);
    } while (used.includes(index));

    used.push(index);
    currentSongIndex = index;

    const player = document.getElementById("player");
    player.src = songs[index] + "&autoplay=1";
    document.getElementById("player-container").style.display = "block";
  }

  function togglePlayer() {
    const container = document.getElementById("player-container");
    const player = document.getElementById("player");

    if (container.style.display === "none" || container.style.display === "") {
      container.style.display = "block";

      if (currentSongIndex !== null) {
        // reload last played song with autoplay
        player.src = songs[currentSongIndex] + "&autoplay=1";
      }
    } else {
      container.style.display = "none";
      player.src = "";  // unload iframe to stop music
    }
  }
</script>

</body>
</html>
